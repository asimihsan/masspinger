<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html class="no-js ie6 ielt7 ielt8 ielt9" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7 ielt8 ielt9" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8 ielt9" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>masspinger</title>
  <meta name="description" content="Monitor network machines using ICMP, HTTP, and SIP.">
  <meta name="author" content="Asim Ihsan">

  <!-- Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- CSS: implied media="all" -->
  <link href='http://fonts.googleapis.com/css?family=Quattrocento' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="css/style.css?v=2">  

  <!-- Uncomment if you are specifically targeting less enabled mobile browsers
  <link rel="stylesheet" media="handheld" href="css/handheld.css?v=2">  -->

  <!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
  <script src="js/libs/modernizr-1.7.min.js"></script>

</head>

<body class="single">
  <a href="http://github.com/asimihsan/masspinger"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
  
  <div id="screen">    
    <header>
        <h1>masspinger - a cross-platform network monitor</h1>
        <ul>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#installation">Installation and quick start</a>
            <ul>
                <li><a href="#installation_windows">Windows</a></li>
                <li><a href="#installation_ubuntu">Ubuntu</a></li>
                <li><a href="#installation_usage">Usage</a></li>
            </ul>            
            </li>
            <li><a href="#download">Download</a></li>            
            <li><a href="#building">Building from source</a>
            <ul>
                <li><a href="#building_windows">Windows</a></li>
                <li><a href="#building_ubuntu">Ubuntu</a></li>
            </ul>
            </li>            
            <li><a href="#troubleshooting">Troubleshooting</a></li>
            <li><a href="#developer">Developer's guide</a></li>
            <li><a href="#future">Future development</a></li>
            <li><a href="#changelog">Software and document changelog</a>
            <ul>
                <li><a href="#changelog_software">Software</a></li>
                <li><a href="#changelog_document">Document</a></li>
            </ul>
            </li>
        </ul>        
    </header>
    <section id="content" class="G4 GS">
        <article><div class="formatted">
            
            <h2><a name="introduction">Introduction</a></h2>            
                <p>masspinger is a command-line tool that uses ICMP pings, and in the future HTTP GETs and SIP REGISTERs/calls, to continuously monitor network machines. It is intended for deployment by network administrators as part of a broader network monitoring system. It supports both Windows and Linux operating systems.</p>      
                <p>The use of the <a href="http://www.zeromq.org/">ZeroMQ</a> socket library allows network administrators to efficiently and scalably use masspinger as a lower-level building block for constructs written in higher-level languages.  <a href="http://zguide.zeromq.org/page:all">Chapter 1 of ZeroMQ's excellent guide</a> should provide a sufficient background to develop clients that listen for ZeroMQ messages from masspinger.  Keep in mind that all the examples in the manual usually have equivalents in other languages.</p>            
            <h2><a name="installation">Installation and quick start guide</a></h2>
            <h3><a name="installation_windows">Windows</a></h3>
            <p>The following have been tested on Windows XP SP2 and Windows 7, but should also other compatible versions of Windows.  In order to use masspinger you need Administrator access on the machine it runs on.</p>
            <ul>
                <li>Either <a href="#download">download the ZIP package of the GitHub repo</a> or <span class="mono">git clone</span> it.</li>
                <li>The <span class="mono">masspinger/bin/win32/release</span> folder contains <span class="mono">masspinger.exe</span> and other required DLL files that must remain in the same directory.</li>
                <li>If you do not have Microsoft Visual Studio (MSVC) 2008 or later installed on the machine download and install the <a href="http://preview.tinyurl.com/29563wl">MSVC 2008 Redistributable Package (x86)</a>.</li>
                <li>Try to execute <span class="mono">masspinger.exe</span> without any command-line arguments. You should get a print-out of the usage text.</li>                
            </ul>
            <p>Uninstallation involves deleting the files you've downloaded; no other files or Registry settings are altered.</p>
            <h3><a name="installation_ubuntu">Ubuntu</a></h3>
            <p>The following have been testing on Ubuntu Maverick 10.10 but should work on all compatible versions of Ubuntu, and with appropriate modifications on any Linux platform that supports all the libraries used (e.g. RedHat).  You must have root user privileges in order to use <span class="mono">masspinger</span>.</p>
            <ul>
                <li>Follow the <a href="#building_ubuntu">instructions for building the code from source</a>.</li>
                <li>Try to execute <span class="mono">masspinger</span> without any command-line arguments. You should get a print-out of the usage text.</li>
            </ul>
            <h3><a name="usage">Usage</a></h3>            
            <p><pre>
C:\masspinger&gt;masspinger.exe
Need to specify at least one host to monitor.
Allowed options:
  --help                   Produce help message.
  -H [ --host ] arg        An IP address or DNS hostname to monitor using ICMP
                           pings.
  -b [ --zeromq_bind ] arg One or more ip_address:port pairs to publish ZeroMQ
                           messages from, e.g. 'tcp://127.0.0.1:5556'.
  -V [ --verbose ]         Verbose debug output.            
            </pre></p>
            <p>For example:</p>
            <pre>
masspinger.exe 192.168.0.1 192.168.0.100 -b tcp://*:5556 -V
            </pre>
            <p>will continuously send ICMP pings at an interval of one second to the hosts <span class="mono">192.168.0.1</span> and <span class="mono">192.168.0.100</span>, publish the results on all interfaces over TCP on port 5556, and show verbose diagnostics about low-level events. A further example:</p>
            <pre>
./masspinger hostname1 hostname2 hostname3 hostname4 hostname5 -b tcp://10.0.0.1:5556 -b tcp://10.0.0.2:5556
            </pre>
            <p>will monitor all five hosts mentioned and publish the results on two different TCP bindings.  These could correspond to different Ethernet interfaces and hence provide fault-tolerance in the case of a layer 2 failure on a given interface, assuming the two interfaces are truly orthogonal.</p>   
            <p>As a starting point for developing higher-level tools that use masspinger, see <span class="mono">massping/tools/python_client.py</span> as an example.  It just subscribes for all ZeroMQ publish messages and a variable number of bindings and logs them to the console.  You'll need to <a href="http://www.zeromq.org/bindings:python">install the Python bindings for ZeroMQ</a> in order to use this tool. <a href="https://launchpad.net/~chris-lea/+archive/zeromq">Here is an up-to-date Ubuntu repo to use for the bindings</a>.</p>            
            <h2><a name="download">Download</a></h2>                
      <a href="http://github.com/asimihsan/masspinger/zipball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/zip.png" /></a>
      <a href="http://github.com/asimihsan/masspinger/tarball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/tar.png" /></a>        
            
                 
            <h2><a name="building">Building from source</a></h2>
            <h3><a name="building_windows">Windows</a></h3>
            <ul>
            <li>Requires Microsoft Visual Studio, tested on MSVC 2010 (version 9).</li>
            <li>Download latest version of Boost from http://www.boost.org/.  Extract to e.g. c:\libs\boost\</li>
            <li>Follow the <a href="http://www.boost.org/doc/libs/1_46_1/more/getting_started/windows.html">Boost "Getting Started" instructions</a>, to build the Boost binaries.  This is essentially "bootstrap" and ".\bjam" from a MSVC prompt.</li>
            <li>The Boost binaries should now be in e.g. c:\libs\boost\stage\lib\</li>
            <li>&lt;TODO download and compile ZeroMQ, follow site instructions&gt;</li>
            <li>&lt;TODO download and install log4cxx.  This is quite complex, but boils down to <a href="http://www.elpauer.org/?p=250">http://www.elpauer.org/?p=250</a> then <a href="http://tinyurl.com/4ufyauz">http://tinyurl.com/4ufyauz</a>.  This is because the binary is statically linked&gt;.</li>
            <li>&lt;TODO Clone git repo, edit MSVC solution linker directories and include directories to your Boost/ZeroMQ/log4cxx/apr/apr-util/xml locations&gt;</li>
            </ul>

            <h3><a name="building_ubuntu">Ubuntu</a></h3>
            <p><ul>            
                <li>&lt;TODO Download/install latest version of Boost from source, build it, then put the library path into /etc/ld.so.conf/ and run ldconfig&gt;</li>
                <li>sudo apt-get install liblog4cxx10 liblog4cxx10-dev, because I couldn't successfully build it from source.</li>
                <li><a href="http://johanharjono.com/archives/633">Install the latest version of zeromq</a>.</li>
                <li>&lt;git clone, cd to the src directory, then run:<br/ ><br />
                <pre>g++ -O3 -I /usr/local/lib/boost_1_46_0/ -L /usr/local/lib/boost_1_46_0/stage/lib -lboost_system -lboost_program_options -llog4cxx -lzmq -Wall -ansi -pedantic `ls *.cpp | xargs` -o masspinger</pre>
                </li>
            </ul></p>

            <h2><a name="troubleshooting">Troubleshooting</a></h2>
            <ul>
                <li>Q: masspinger isn't doing anything!<br />
                A: Turn on verbose trace using the <span class="mono">--verbose</span> command-line argument to confirm that the tool is attempting to do something.  Then use <a href="http://www.wireshark.org/">Wireshark</a> or tcpdump to confirm whether e.g. ICMP pings are leaving your box and whether any responses are coming back.  Keep in mind that <a href="http://wiki.wireshark.org/CaptureSetup/Loopback">you cannot sniff on the loopback interface on Windows</a>, so absence on traffic in this scenario doesn't imply a lack of traffic.
                </li>
                        
            
            <h2><a name="developer">Developer's guide</a></h2>
            

            
            <h2><a name="future">Future development</a></h2>            
            
            
            <h2><a name="developer">Software and document changelog</a></h2>
            
            
            </div>            
        </article>
    </section>
    <footer>
        Copyright (c) 2011 Asim Ihsan (asim dot ihsan at gmail dot com).
    </footer>
  </div> <!--! end of #screen -->

  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.5.1.min.js">\x3C/script>')</script>


  <!-- scripts concatenated and minified via ant build script-->
  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>
  <!-- end scripts-->


  <!--[if lt IE 7 ]>
    <script src="js/libs/dd_belatedpng.js"></script>
    <script>DD_belatedPNG.fix('img, .png_bg'); // Fix any <img> or .png_bg bg-images. Also, please read goo.gl/mZiyb </script>
  <![endif]-->


    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-22019953-1']);
        _gaq.push(['_trackPageview']);
        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>  

</body>
</html>
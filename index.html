<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7 ]> <html class="no-js ie6 ielt7 ielt8 ielt9" lang="en"> <![endif]-->
<!--[if IE 7 ]>    <html class="no-js ie7 ielt8 ielt9" lang="en"> <![endif]-->
<!--[if IE 8 ]>    <html class="no-js ie8 ielt9" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
       Remove this if you use the .htaccess -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>masspinger</title>
  <meta name="description" content="Monitor network machines using ICMP, HTTP, and SIP.">
  <meta name="author" content="Asim Ihsan">

  <!-- Mobile viewport optimized: j.mp/bplateviewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- CSS: implied media="all" -->
  <link href='http://fonts.googleapis.com/css?family=Quattrocento' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="css/style.css?v=2">  
  <link href="css/desert.css" type="text/css" rel="stylesheet">

  <!-- Uncomment if you are specifically targeting less enabled mobile browsers
  <link rel="stylesheet" media="handheld" href="css/handheld.css?v=2">  -->

  <!-- All JavaScript at the bottom, except for Modernizr which enables HTML5 elements & feature detects -->
  <script src="js/libs/modernizr-1.7.min.js"></script>

</head>

<body class="single" onload="prettyPrint()">
  <a href="http://github.com/asimihsan/masspinger"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
  
  <div id="screen">    
    <header>
        <h1>masspinger - a cross-platform network monitor</h1>
        <ul>
            <li><a href="#introduction">Introduction</a></li>
            <li><a href="#installation">Installation and quick start</a>
            <ul>
                <li><a href="#installation_windows">Windows</a></li>
                <li><a href="#installation_ubuntu">Ubuntu</a></li>
                <li><a href="#installation_usage">Usage</a></li>
            </ul>            
            </li>
            <li><a href="#download">Download</a></li>            
            <li><a href="#building">Building from source</a>
            <ul>
                <li><a href="#building_windows">Windows</a></li>
                <li><a href="#building_ubuntu">Ubuntu</a></li>
            </ul>
            </li>            
            <li><a href="#troubleshooting">Troubleshooting</a></li>
            <li><a href="#developer">Developer's guide</a></li>
            <li><a href="#future">Future development</a></li>
            <li><a href="#changelog">Software and document changelog</a>
            <ul>
                <li><a href="#changelog_software">Software</a></li>
                <li><a href="#changelog_document">Document</a></li>
            </ul>
            </li>
            <li><a href="#comments">Comments</a></li>
        </ul>        
    </header>
    <section id="content" class="G4 GS">
        <article><div class="formatted">
            
            <h2><a name="introduction">Introduction</a></h2>            
                <p>masspinger is a command-line tool that uses ICMP pings, and in the future HTTP GETs and SIP REGISTERs/calls, to continuously monitor network machines. It is intended for deployment by network administrators as part of a broader network monitoring system. It supports both Windows and Linux operating systems.</p>      
                <p>The use of the <a href="http://www.zeromq.org/">ZeroMQ</a> socket library allows network administrators to efficiently and scalably use masspinger as a lower-level building block for constructs written in higher-level languages.  <a href="http://zguide.zeromq.org/page:all">Chapter 1 of ZeroMQ's excellent guide</a> should provide a sufficient background to develop clients that listen for ZeroMQ messages from masspinger.  Keep in mind that all the examples in the manual usually have equivalents in other languages.</p>            
            <h2><a name="installation">Installation and quick start guide</a></h2>
            <h3><a name="installation_windows">Windows</a></h3>
            <p>The following have been tested on Windows XP SP2 and Windows 7, but should also other compatible versions of Windows.  In order to use masspinger you need Administrator access on the machine it runs on.</p>
            <ul>
                <li>Either <a href="#download">download the ZIP package of the GitHub repo</a> or <span class="mono">git clone</span> it.</li>
                <li>The <span class="mono">masspinger/bin/win32/release</span> folder contains <span class="mono">masspinger.exe</span> and other required DLL files that must remain in the same directory.</li>
                <li>If you do not have Microsoft Visual Studio (MSVC) 2008 or later installed on the machine download and install the <a href="http://preview.tinyurl.com/29563wl">MSVC 2008 Redistributable Package (x86)</a>.</li>
                <li>Try to execute <span class="mono">masspinger.exe</span> without any command-line arguments. You should get a print-out of the usage text.</li>                
            </ul>
            <p>Uninstallation involves deleting the files you've downloaded; no other files or Registry settings are altered.</p>
            <h3><a name="installation_ubuntu">Ubuntu</a></h3>
            <p>The following have been testing on Ubuntu Maverick 10.10 but should work on all compatible versions of Ubuntu, and with appropriate modifications on any Linux platform that supports all the libraries used (e.g. RedHat).  You must have root user privileges in order to use <span class="mono">masspinger</span>.</p>
            <ul>
                <li>Follow the <a href="#building_ubuntu">instructions for building the code from source</a>.</li>
                <li>Try to execute <span class="mono">masspinger</span> without any command-line arguments. You should get a print-out of the usage text.</li>
            </ul>
            <h3><a name="usage">Usage</a></h3>            
            <p><pre class="literal-block">
C:\masspinger&gt;masspinger.exe
Need to specify at least one host to monitor.
Allowed options:
  --help                   Produce help message.
  -H [ --host ] arg        An IP address or DNS hostname to monitor using ICMP
                           pings.
  -b [ --zeromq_bind ] arg One or more ip_address:port pairs to publish ZeroMQ
                           messages from, e.g. 'tcp://127.0.0.1:5556'.
  -V [ --verbose ]         Verbose debug output.            
            </span></pre></p>
            <p>For example:</p>
            <pre class="literal-block">masspinger.exe 192.168.0.1 192.168.0.100 -b tcp://*:5556 -V</pre>
            <p>will continuously send ICMP pings at an interval of one second to the hosts <span class="mono">192.168.0.1</span> and <span class="mono">192.168.0.100</span>, publish the results on all interfaces over TCP on port 5556, and show verbose diagnostics about low-level events. A further example:
            <pre class="literal-block">./masspinger hostname1 hostname2 hostname3 hostname4 hostname5 -b tcp://10.0.0.1:5556 -b tcp://10.0.0.2:5556</pre></p>
            <p>will monitor all five hosts mentioned and publish the results on two different TCP bindings.  These could correspond to different Ethernet interfaces and hence provide fault-tolerance in the case of a layer 2 failure on a given interface, assuming the two interfaces are truly orthogonal.</p>   
            <p>As a starting point for developing higher-level tools that use masspinger, see <span class="mono">massping/tools/python_client.py</span> as an example.  It just subscribes for all ZeroMQ publish messages and a variable number of bindings and logs them to the console.  You'll need to <a href="http://www.zeromq.org/bindings:python">install the Python bindings for ZeroMQ</a> in order to use this tool. <a href="https://launchpad.net/~chris-lea/+archive/zeromq">Here is an up-to-date Ubuntu repo to use for the bindings</a>.</p>            
            <h2><a name="download">Download</a></h2>                
      <a href="http://github.com/asimihsan/masspinger/zipball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/zip.png" /></a>
      <a href="http://github.com/asimihsan/masspinger/tarball/master">
        <img border="0" width="90" src="http://github.com/images/modules/download/tar.png" /></a>        
            
                 
            <h2><a name="building">Building from source</a></h2>
            <h3><a name="building_windows">Windows</a></h3>
            <ul>
            <li>Requires <a href="http://preview.tinyurl.com/3uak9fb">Microsoft Visual Studio 2008</a> and git.  I prefer to use the <a href="http://www.cygwin.com/">cygwin</a> version of git.</li>
            <li>Download latest version of <a href="http://www.boost.org/">Boost</a>.  Extract to e.g. c:\libs\boost\</li>
            <li>Follow the <a href="http://www.boost.org/doc/libs/1_46_1/more/getting_started/windows.html">Boost "Getting Started" instructions</a> to build the Boost binaries.  This is essentially opening a Microsoft Visual Studio command prompt, changing directory to the root of the folder where you extracted Boost to, and executing:<br /><br />
            <pre class="literal-block">bootstrap
./bjam</pre>
            This will take a long time.</li>
            <li>The Boost binaries should now be in e.g. <span class="mono">c:\libs\boost\stage\lib\</span></li>
            <li>Add a pair of system environment variables:
            <ul>
                <li><span class="mono">BOOST_HOME = c:\libs\boost\</span></li>
                <li><span class="mono">BOOST_LIB = c:\libs\boost\stage\lib\</span></li>
            </ul>
            <li>From a command prompt execute the following in order to clone a copy of the repository:<br /><br />
            <pre class="literal-block">git clone git://github.com/asimihsan/masspinger.git</pre></li>
            <li>Open <span class="mono">deps/win32/log4cxx/projects/log4cxx.sln</span> in Microsoft Visual Studio. Change the active solution current configuration to "Release" and build the whole solution.  This will result in a dynamic DLL called <span class="mono">"log4cxx.dll"</span> and other files required for building inside <span class="mono">bin/win32/release/</span>.</li>
            <li>Open <span class="mono">deps/win32/zeromq/builds/msvc/msvc.sln</span> in Microsoft Visual Studio. Change the active solution configuration to "Release" and build the whole solution.  This will result in a dynamic DLL called <span class="mono">"libzmq.dll"</span> and other files required for building inside <span class="mono">bin/win32/release/</span>.</li>
            <li>Open <span class="mono">build/msvc/masspinger.sln</span> in Microsoft Visual Studio.  Change the active solution configuration to "Release" and build the whole solution.  This will result in an EXE called <span class="mono">masspinger.exe</span> inside <span class="mono">bin/win32/release/</span>.</li>
            </ul>

            <h3><a name="building_ubuntu">Ubuntu</a></h3>            
            <p><ul>            
                <li>Download the latest version of <a href="http://www.boost.org">Boost</a> as source code, extact it into e.g. <span class="mono">/usr/local/lib/boost_1_46_0</span>, and build it into the same directory using <a href="http://www.boost.org/doc/libs/1_46_1/more/getting_started/unix-variants.html">these instructions</a>.</li>
                <li>The Boost binaries should now be inside e.g. <span class="mono">/usr/local/lib/boost_1_46_0/stage/lib/</span>.</li>
                <li>Add e.g. <span class="mono">/usr/local/lib/boost_1_46_0/stage/lib/</span> to <span class="mono">/etc/ld.so.conf</span> and then execute:<br /><br /><pre class="literal-block">ldconfig</pre></li>.
                <li><span class="mono">masspinger</span> requires <span class="mono">log4cxx</span> but I haven't been able to successfully build it from source, so execute:<br /><br /><pre class="literal-block">sudo apt-get install liblog4cxx10 liblog4cxx10-dev</pre></li>                
                <li>Either <a href="http://www.zeromq.org/intro:get-the-software">install the latest version of ZeroMQ from source</a> (very easy) or install the latest version of ZeroMQ from Chris Lea's PPA, i.e.:<br /><br />
<pre class="literal-block">sudo add-apt-repository ppa:chris-lea/zeromq
sudo apt-get update
sudo apt-get install zeromq-bin libzmq-dbg libzmq-dev libzmq0</pre>
                <li>Git clone a copy of the repository:<br /><br />
                <pre class="literal-block">git clone git://github.com/asimihsan/masspinger.git</pre></li>
                <li>Change directory to the src directory, then run:<br /><br />
                <pre class="literal-block">g++ -O3 -I /usr/local/lib/boost_1_46_0/ -lboost_system -lboost_program_options -llog4cxx -lzmq -Wall -ansi -pedantic `ls *.cpp | xargs` -o masspinger</pre>
                </li>
            </ul></p>

            <h2><a name="troubleshooting">Troubleshooting</a></h2>
            <ul>
                <li>Q: masspinger isn't doing anything!<br />
                A: Turn on verbose trace using the <span class="mono">--verbose</span> command-line argument to confirm that the tool is attempting to do something.  Then use <a href="http://www.wireshark.org/">Wireshark</a> or tcpdump to confirm whether e.g. ICMP pings are leaving your box and whether any responses are coming back.  Keep in mind that <a href="http://wiki.wireshark.org/CaptureSetup/Loopback">you cannot sniff on the loopback interface on Windows</a>, so absence on traffic in this scenario doesn't imply a lack of traffic.
                </li>                        
            
            <h2><a name="developer">Developer's guide</a></h2>
            

            
            <h2><a name="future">Future development</a></h2>            
            
            
            <h2><a name="developer">Software and document changelog</a></h2>
            
            
            </div>            
        </article>            
        
        <a name="comments"><div id="disqus_thread"></div></a>
        <script type="text/javascript">                
            var disqus_shortname = 'asimihsan'; // required: replace example with your forum shortname    
            var disqus_identifier = 'masspinger';
            var disqus_url = 'http://www.asimihsan.com/masspinger/';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>    
    </section>
    
    <footer>
        Copyright (c) 2011 Asim Ihsan (asim dot ihsan at gmail dot com).
    </footer>
  </div> <!--! end of #screen -->

  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if necessary -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.5.1.min.js">\x3C/script>')</script>

  <!-- scripts concatenated and minified via ant build script-->
  <script src="js/plugins.js"></script>
  <script src="js/script.js"></script>
  <!-- end scripts-->
  
  <script src="js/libs/prettify/prettify.js"></script>

  <!--[if lt IE 7 ]>
    <script src="js/libs/dd_belatedpng.js"></script>
    <script>DD_belatedPNG.fix('img, .png_bg'); // Fix any <img> or .png_bg bg-images. Also, please read goo.gl/mZiyb </script>
  <![endif]-->


    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-22019953-1']);
        _gaq.push(['_trackPageview']);
        (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>  

</body>
</html>